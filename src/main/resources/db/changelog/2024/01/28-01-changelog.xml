<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.24.xsd"
        objectQuotingStrategy="QUOTE_ONLY_RESERVED_WORDS">
    <changeSet id="1706434389508-1" author="momos (generated)">
        <createTable tableName="actor">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_actor"/>
            </column>
            <column name="full_name" type="VARCHAR(255)"/>
            <column name="birth_date" type="DATETIME"/>
        </createTable>
    </changeSet>
    <changeSet id="1706434389508-2" author="momos (generated)">
        <createTable tableName="country">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_country"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1706434389508-3" author="momos (generated)">
        <createTable tableName="episode">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_episode"/>
            </column>
            <column name="episode_number" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="picture" type="VARCHAR(255)"/>
            <column name="season_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet id="1706434389508-4" author="momos (generated)">
        <createTable tableName="genre">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_genre"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1706434389508-5" author="momos (generated)">
        <createTable tableName="media">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_media"/>
            </column>
            <column name="name" type="VARCHAR(255)">
                <constraints nullable="false"/>
            </column>
            <column name="duration" type="TIME"/>
            <column name="picture" type="VARCHAR(255)"/>
            <column name="link_trailer" type="VARCHAR(255)"/>
            <column name="link_imdb" type="VARCHAR(255)"/>
            <column name="director" type="VARCHAR(255)"/>
            <column name="release_date" type="DATE"/>
            <column name="description" type="VARCHAR(255)"/>
            <column name="short_link" type="VARCHAR(255)"/>
            <column name="lang" type="VARCHAR(255)"/>
            <column name="status_serie" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="level_view" type="INT"/>
            <column name="is_movie" type="BOOLEAN">
                <constraints nullable="false"/>
            </column>
            <column name="genre_id" type="BIGINT"/>
            <column name="country_id" type="BIGINT"/>
            <column name="type_quality_id" type="BIGINT"/>
            <column name="slider_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet id="1706434389508-6" author="momos (generated)">
        <createTable tableName="media_actor">
            <column name="actor_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="media_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1706434389508-7" author="momos (generated)">
        <createTable tableName="media_genre">
            <column name="genre_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
            <column name="media_id" type="BIGINT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1706434389508-8" author="momos (generated)">
        <createTable tableName="role">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_role"/>
            </column>
            <column name="assignments" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1706434389508-9" author="momos (generated)">
        <createTable tableName="roles_users">
            <column name="role_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_roles_users"/>
            </column>
            <column name="user_id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_roles_users"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet id="1706434389508-10" author="momos (generated)">
        <createTable tableName="season">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_season"/>
            </column>
            <column name="season_number" type="INT">
                <constraints nullable="false"/>
            </column>
            <column name="picture" type="VARCHAR(255)"/>
            <column name="media_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet id="1706434389508-11" author="momos (generated)">
        <createTable tableName="server_play">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_serverplay"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
            <column name="media_id" type="BIGINT"/>
            <column name="episode_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet id="1706434389508-12" author="momos (generated)">
        <createTable tableName="slider">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_slider"/>
            </column>
            <column name="picture" type="VARCHAR(255)"/>
            <column name="media_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet id="1706434389508-13" author="momos (generated)">
        <createTable tableName="type_quality">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_typequality"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet id="1706434389508-14" author="momos (generated)">
        <createTable tableName="users">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_users"/>
            </column>
            <column name="first_name" type="VARCHAR(255)"/>
            <column name="last_name" type="VARCHAR(255)"/>
            <column name="user_name" type="VARCHAR(255)"/>
            <column name="email" type="VARCHAR(255)"/>
            <column name="password" type="VARCHAR(255)"/>
            <column name="authorities"
                    type="unknown__java.util.Collection&lt;? extends org.springframework.security.core.GrantedAuthority&gt;"/>
        </createTable>
    </changeSet>
    <changeSet id="1706434389508-15" author="momos (generated)">
        <createTable tableName="watchlist">
            <column autoIncrement="true" name="id" type="BIGINT">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_watchlist"/>
            </column>
            <column name="user_id" type="BIGINT"/>
            <column name="media_id" type="BIGINT"/>
        </createTable>
    </changeSet>
    <changeSet id="1706434389508-16" author="momos (generated)">
        <addForeignKeyConstraint baseColumnNames="season_id" baseTableName="episode"
                                 constraintName="FK_EPISODE_ON_SEASON" referencedColumnNames="id"
                                 referencedTableName="season"/>
    </changeSet>
    <changeSet id="1706434389508-17" author="momos (generated)">
        <addForeignKeyConstraint baseColumnNames="country_id" baseTableName="media" constraintName="FK_MEDIA_ON_COUNTRY"
                                 referencedColumnNames="id" referencedTableName="country"/>
    </changeSet>
    <changeSet id="1706434389508-18" author="momos (generated)">
        <addForeignKeyConstraint baseColumnNames="genre_id" baseTableName="media" constraintName="FK_MEDIA_ON_GENRE"
                                 referencedColumnNames="id" referencedTableName="genre"/>
    </changeSet>
    <changeSet id="1706434389508-19" author="momos (generated)">
        <addForeignKeyConstraint baseColumnNames="slider_id" baseTableName="media" constraintName="FK_MEDIA_ON_SLIDER"
                                 referencedColumnNames="id" referencedTableName="slider"/>
    </changeSet>
    <changeSet id="1706434389508-20" author="momos (generated)">
        <addForeignKeyConstraint baseColumnNames="type_quality_id" baseTableName="media"
                                 constraintName="FK_MEDIA_ON_TYPEQUALITY" referencedColumnNames="id"
                                 referencedTableName="type_quality"/>
    </changeSet>
    <changeSet id="1706434389508-21" author="momos (generated)">
        <addForeignKeyConstraint baseColumnNames="media_id" baseTableName="season" constraintName="FK_SEASON_ON_MEDIA"
                                 referencedColumnNames="id" referencedTableName="media"/>
    </changeSet>
    <changeSet id="1706434389508-22" author="momos (generated)">
        <addForeignKeyConstraint baseColumnNames="episode_id" baseTableName="server_play"
                                 constraintName="FK_SERVERPLAY_ON_EPISODE" referencedColumnNames="id"
                                 referencedTableName="episode"/>
    </changeSet>
    <changeSet id="1706434389508-23" author="momos (generated)">
        <addForeignKeyConstraint baseColumnNames="media_id" baseTableName="server_play"
                                 constraintName="FK_SERVERPLAY_ON_MEDIA" referencedColumnNames="id"
                                 referencedTableName="media"/>
    </changeSet>
    <changeSet id="1706434389508-24" author="momos (generated)">
        <addForeignKeyConstraint baseColumnNames="media_id" baseTableName="slider" constraintName="FK_SLIDER_ON_MEDIA"
                                 referencedColumnNames="id" referencedTableName="media"/>
    </changeSet>
    <changeSet id="1706434389508-25" author="momos (generated)">
        <addForeignKeyConstraint baseColumnNames="media_id" baseTableName="watchlist"
                                 constraintName="FK_WATCHLIST_ON_MEDIA" referencedColumnNames="id"
                                 referencedTableName="media"/>
    </changeSet>
    <changeSet id="1706434389508-26" author="momos (generated)">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="watchlist"
                                 constraintName="FK_WATCHLIST_ON_USER" referencedColumnNames="id"
                                 referencedTableName="users"/>
    </changeSet>
    <changeSet id="1706434389508-27" author="momos (generated)">
        <addForeignKeyConstraint baseColumnNames="media_id" baseTableName="media_actor"
                                 constraintName="fk_medact_on_actor" referencedColumnNames="id"
                                 referencedTableName="actor"/>
    </changeSet>
    <changeSet id="1706434389508-28" author="momos (generated)">
        <addForeignKeyConstraint baseColumnNames="actor_id" baseTableName="media_actor"
                                 constraintName="fk_medact_on_media" referencedColumnNames="id"
                                 referencedTableName="media"/>
    </changeSet>
    <changeSet id="1706434389508-29" author="momos (generated)">
        <addForeignKeyConstraint baseColumnNames="media_id" baseTableName="media_genre"
                                 constraintName="fk_medgen_on_genre" referencedColumnNames="id"
                                 referencedTableName="genre"/>
    </changeSet>
    <changeSet id="1706434389508-30" author="momos (generated)">
        <addForeignKeyConstraint baseColumnNames="genre_id" baseTableName="media_genre"
                                 constraintName="fk_medgen_on_media" referencedColumnNames="id"
                                 referencedTableName="media"/>
    </changeSet>
    <changeSet id="1706434389508-31" author="momos (generated)">
        <addForeignKeyConstraint baseColumnNames="user_id" baseTableName="roles_users"
                                 constraintName="fk_roluse_on_app_user" referencedColumnNames="id"
                                 referencedTableName="users"/>
    </changeSet>
    <changeSet id="1706434389508-32" author="momos (generated)">
        <addForeignKeyConstraint baseColumnNames="role_id" baseTableName="roles_users"
                                 constraintName="fk_roluse_on_role" referencedColumnNames="id"
                                 referencedTableName="role"/>
    </changeSet>

</databaseChangeLog>